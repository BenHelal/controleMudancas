{% extends 'base.html.twig' %}


{% block body %}
	<link href="https://cdn.jsdelivr.net/npm/tom-select@2.1.0/dist/css/tom-select.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/tom-select@2.1.0/dist/js/tom-select.complete.min.js"></script>
	<div class="container" style="padding-left: 20px ;padding-right: 20px;">
		<div class="py-5 text-center">
			<img class="d-block mx-auto mb-4" src="{{ asset('assets/logo.png')}}" alt="" width="72" height="72"/>
			<h2>Controle de Mudança</h2>
			<br>
		</div>
	</div>
	<div class="row">
		<table class="table">
			<thead>
				<tr>
					<th scope="col">Tipo de Aprovação</th>
					<th scope="col">Área</th>
					<th scope="col">Nome do Aprovador</th>
					<th scope="col">Status Aprovação</th>
					<th scope="col">Comentário</th>
				</tr>
			</thead>


			<tbody>
				<tr>
					<th scope="row">Peticionário</th>
					<td>
						{% if mud.addBy.name != null %}
							{{mud.addBy.departemant}}
						{% endif %}
					</td>
					<td>
						{% if mud.addBy != null %}
							{{mud.addBy.name}}
						{% endif %}
					</td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<th scope="row">Gerente Solicitante</th>
					<td>
						{% if mud.managerUserAdd != null %}
							{{mud.managerUserAdd.departemant}}
							{% else %}

						{% endif %}
					</td>
					<td>
						{% if mud.managerUserAdd != null %}
							{{mud.managerUserAdd.name}}
						{% else %}
							Projeto Nansen
						{% endif %}
					</td>
					<td>
						{% if mud.managerUserApp != null %}
							{% if mud.managerUserApp == 1 %}
								Aprovado
							{% elseif mud.managerUserApp == 2 %}
								Rejeitado
							{% endif %}
						{% else %}
							Ainda não verificado
						{% endif %}
					</td>
					<td>
						{% if mud.managerUserComment != null %}
							{{mud.managerUserComment}}
						{% else %}
							Ainda não comentário
						{% endif %}
					</td>
				</tr>
				<tr>
					<th scope="row">Gerente Aprovação</th>
					{% if p == null %}
						<td>Ainda não verificado</td>
						<td>Ainda não verificado</td>
					{% else %}
						<td>{{mud.areaResp.name}}</td>
						<td>{{mud.areaResp.manager.name}}</td>
					{% endif %}

					{% if mud.appMan == 1 %}
						<td>Aprovado</td>
					{% elseif mud.appMan == 2  %}
						<td>Rejeitado</td>
					{% elseif  mud.appMan == null  %}
						<td>Ainda não verificado</td>
					{% endif %}


					{% if mud.comMan != null %}
						<td>{{mud.comMan}}</td>
					{%  else %}
						<td>Ainda não comentário</td>
					{% endif %}
				</tr>
				<tr>
					<th scope="row">Gestor da Mudança</th>
					{% if mud.mangerMudancas == null %}
						<td>Ainda não verificado</td>
						<td>Ainda não verificado</td>
					{% else %}
						<td>{{mud.mangerMudancas.departemant}}</td>
						<td>{{mud.mangerMudancas.name}}</td>
					{% endif %}
					{% if mud.appGest == null %}
						<td>Ainda não verificado</td>
					{% elseif mud.appGest == 1 %}
						<td>Aprovado</td>
					{% elseif mud.appGest == 2 %}
						<td>Rejeitado</td>
					{% endif %}

					{% if mud.appGest == null %}
						<td>Ainda não comentário</td>
					{% else %}
						<td>{{mud.comGest}}</td>
					{% endif %}
				</tr>

				{% for key, m in data %}
					<tr>
						<th scope="row">Área Impactada</th>
						<td>{{m.name}}</td>
						<td>{{data2[key].name }}</td>
						{% if  m.app_sector_man  == 1  %}
							<td>Aprovado</td>
						{% elseif m.app_sector_man == 2 %}
							<td>Rejeitado</td>
						{% elseif m.app_sector_man == null   %}
							<td>Ainda não verificado</td>
						{% endif %}


						{% if m.comment == null %}
							<td>Ainda não comentário</td>
						{% else %}
							<td>{{m.comment}}</td>
						{% endif %}
					</tr>
				</td>
			</tbody>
		</tr>
	{% endfor %}
</tbody></table></div>{% endblock %}
